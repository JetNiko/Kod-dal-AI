<!DOCTYPE html>
<html>
<head>
  <title>Monster Hunter - Przeglądarkowa gra RPG</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      background-image: url("bg0.png");
    }

    #gameContainer {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin: 20px;
    }

    #playerStatsInventory {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    #playerStats {
      width: 300px;
      height: 460px;
      padding: 20px;
      background-image: url("main.jpg");
    }

    #enemyContainer {
      width: 410px;
      height: 460px;
      padding: 20px;
      background-image: url("main.jpg");
    }

    #enemyStats {
      width: 400px;
      height: 360px;
    }

    #inventory {
      width: 160px;
      height: 460px;
      padding: 20px;
      background-image: url("main.jpg");
    }

    #market {
      width: 200px;
      height: 460px;
      padding: 20px;
      background-image: url("main.jpg");
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    #gameNavi {
      height: 76px;
      margin: 20px;
      padding: 2px;
      background-image: url("main.jpg");
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }

    h1 {
      text-align: center;
      color: #000000;
    }

    h2 {
      text-align: center;
      color: #000000;
    }

    h3 {
      font-weight: bold;
    }

    video {
      width: 410px;
      display: none;
    }

    #playerAvatar {
      width: 300px;
      height: 200px;
      background-color: #eaeaea;
      background-image: url("avatar.jpg");
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 24px;
      color: #666666;
      margin-bottom: 10px;
      transition: background-color 0.3s;
    }

    #healthBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #healthBarFill {
      height: 100%;
      background-color: #2ecc71;
      transition: width 0.3s, background-color 0.3s;
    }

    #healthEnemyBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #healthEnemyBarFill {
      height: 100%;
      background-color: #2ecc71;
      transition: width 0.3s, background-color 0.3s;
    }

    #resistanceBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #resistanceBarFill {
      height: 100%;
      background-color: #cfc0c0;
      transition: width 0.3s, background-color 0.3s;
    }

    #experienceBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #experienceBarFill {
      height: 100%;
      background-color: #8080ff;
      transition: width 0.3s, background-color 0.3s;
    }

    #damageBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #damageBarFill {
      height: 100%;
      background-color: #ff0000;
      transition: width 0.3s, background-color 0.3s;
    }

    #damageEnemyBar {
      width: 100%;
      height: 10px;
      background-color: #eaeaea;
      margin-bottom: 10px;
      border-radius: 5px;
      overflow: hidden;
    }

    #damageEnemyBarFill {
      height: 100%;
      background-color: #ff0000;
      transition: width 0.3s, background-color 0.3s;
    }


    .buttonContainer {
      text-align: center;
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      background-color: #9b613c;
      border: none;
      color: #ffffff;
      font-size: 16px;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-image: url("main.jpg");
      background-color: #f0f1f1;
    }

    #combatLog {
      padding: 10px;
      background-color: #f1f1f1;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      max-height: 98px;
      margin: 20px;
      overflow-y: scroll;
    }

    .logMessage {
      margin-bottom: 5px;
    }

    /* Animations */
    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      0% {
        transform: scale(0.5);
      }
      100% {
        transform: scale(1);
      }
    }
	
  </style>
</head>
<body>
  <div id="gameContainer">
   <div id="playerStatsInventory">
    <div id="playerStats">
      <h2><p>WALTER  -  LEVEL: <span id="playerLevel">0</span></p></h2>
      <div id="playerAvatar" class="fadeIn"></div>
      <h3>HP: <span id="playerHealth">100</span>/<span id="playerMaxHealth">100</span><div id="healthBar">
        <div id="healthBarFill"></div>
      </div>
      ARMOR: <span id="playerResistance">0</span>/<span id="playerMaxResistance">100</span><div id="resistanceBar">
        <div id="resistanceBarFill"></div>
      </div>
      ATTACK: <span id="playerDamage">0</span>/<span id="playerMaxDamage">20</span><div id="damageBar"> 
        <div id="damageBarFill"></div>
      </div>
      EXP: <span id="playerExperience">0</span>/<span id="playerMaxExperience">100</span><div id="experienceBar"> 
        <div id="experienceBarFill"></div>
      </div></h3>
    </div>

    <div id="inventory">
      <h2>EKWIPUNEK</h2>
      <h3><p>Monety: <span id="playerCoins">10</span></p>
      <p>Ulepszenia miecza: <span id="swords">0</span></p>
      <p>Pancerze: <span id="shields">0</span></p>
      <p>Mikstury: <span id="potions">0</span></p>
      <p>Posiłki: <span id="meals">0</span></p>
      <p>Skrzynie: <span id="chests">0</span></p></h3>
    </div>
   </div>
   <div id="enemyContainer">
        <video id="gameVideo" width="410" height="280" controls>
         <source src="film1.mp4" type="video/mp4">
         Twoja przeglądarka nie obsługuje odtwarzania filmów.
        </video>
    <div id="enemyStats">
    </div>
       <h3 id="enemyHP" style="display: none;">HP: <span id="currEnemyHealth">0</span>/<span id="enemyHealth">0</span>
        <div id="healthEnemyBar">
         <div id="healthEnemyBarFill">
         </div>
        </div>
       ATTACK: <span id="enemyAttack">0</span>/<span id="enemyDamage">0</span>
        <div id="damageEnemyBar">
         <div id="damageEnemyBarFill">
         </div>
        </div>
     </h3>
    </div>
    <div id="market">
      <h2>Targowisko</h2>
      <div class="buttonContainer">
      <p><button onclick="buySword()" class="fadeIn" id="swordButton">Ulepsz miecz (+2 DMG, 10 monet)</button></p>
      <p><button onclick="buyShield()" class="fadeIn">Kup pancerz (+25 ARMOR, 4 monety)</button></p>
      <p><button onclick="buyPotion()" class="fadeIn">Kup miksturę leczenia (+30 HP, 4 monety)</button></p>
      <p><button onclick="buyMeal()" class="fadeIn">Kup posiłek (+100% HP, 12 monet)</button></p>
      <p><button onclick="buyChest()" class="fadeIn">Kup skrzynię (10 monet, efekt losowy)</button></p>
      </div>
    </div>
  </div>
  <h1>Monster Hunter - dziennik walki</h1>
<div id="combatLog">
</div>
<div id="gameNavi">
  <div class="buttonContainer">
    <button id="travelButton" onclick="startTravel()" class="fadeIn">Podróżuj</button>
    <div id="decisionButtons" style="display: none;">
      <button onclick="makeDecision('left')" class="fadeIn">Idź w lewo</button>
      <button onclick="makeDecision('right')" class="fadeIn">Idź w prawo</button>
    </div>
    <button id="encounterButton" onclick="encounterEnemy()" class="fadeIn" style="display: none;">Kontynuuj</button>
    <button onclick="usePotion()" class="fadeIn">Użyj mikstury</button>
    <button onclick="useMeal()" class="fadeIn">Zjedz posiłek</button>
    <button onclick="useChest()" class="fadeIn">Otwórz skrzynię</button>
  </div>
</div>

  <script>
    var playerHealth = 100;
    var playerMaxHealth = 100;
    var playerResistance = 0;
    var playerMaxResistance = 100;
    var playerDamage = 0;
    var playerMaxDamage = 20;
    var playerMaxResistance = 100;
    var playerExperience = 0;
    var playerMaxExperience = 100;
    var playerLevel = 0;
    var playerCoins = 10;
    var swords = 0;
    var shields = 0;
    var potions = 0;
    var meals = 0;
    var chests = 0;
    var combatLog = document.getElementById("combatLog");
    var encounterButton = document.getElementById("encounterButton");
    var travelButton = document.getElementById("travelButton");
    var decisionButtons = document.getElementById("decisionButtons");
    var enemyStats = document.getElementById("enemyStats");
    var enemyHP = document.getElementById("enemyHP");
    var currEnemyHealth = 0;
    var enemyHealth = 0;
    var enemyDamage = 0;
    var enemyAttack = 0;

    updatePlayerResistanceBar(playerResistance);
    updatePlayerDamageBar(playerDamage);
    updatePlayerExperienceBar(playerExperience);
    updateEnemyDamageBar(enemyAttack);

    storyImage = "<img src='start_story.png'>";
    enemyStats.innerHTML = storyImage;

    function startTravel() {
      addLogMessage("Dzielny Rycerzu właśnie rozpocząłeś swoją przygodę. Na początku wskaż kierunek gdzie się wybierzesz:");
      travelButton.style.display = "none";
      decisionButtons.style.display = "inline-block";
    }

    function makeDecision(direction) {
    var storiesA = [
        "po chwili spostrzegasz przed sobą ",
        "docierasz do opuszczonej miejscowości, w której napotykasz ",
        "a spacerując w tym kierunku nagle spostrzegasz ",
        "po dłuższej chwili znajdujesz ", 
        "nagle dostrzegasz "
        ];
    var randomPlace = Math.random();
    if (randomPlace < 0.1) {
        placeType = "otwór w ziemi";
        storyImage = "<img src='dziura.png'>";
      } else if (randomPlace < 0.25) {
        placeType = "stary opuszczony dom";
        storyImage = "<img src='dom.png'>";
      } else if (randomPlace < 0.3) {
        placeType = "opuszczone targowisko";
        storyImage = "<img src='targ.png'>";
      } else if (randomPlace < 0.35) {
        placeType = "ślad jakiegoś stwora";
        storyImage = "<img src='coś.png'>";
      } else if (randomPlace < 0.4) {
        placeType = "mroczny las";
        storyImage = "<img src='mrok.png'>";
      } else if (randomPlace < 0.45) {
        placeType = "zaczarowany gaj";
        storyImage = "<img src='gaj.png'>";
      } else if (randomPlace < 0.5) {
        placeType = "opuszczoną kopalnię";
        storyImage = "<img src='kopalnia.png'>";
      } else if (randomPlace < 0.55) {
        placeType = "nawiedzone bagno";
        storyImage = "<img src='bag.png'>";
      } else if (randomPlace < 0.6) {
        placeType = "starą studnię";
        storyImage = "<img src='stu.png'>";
      } else if (randomPlace < 0.65) {
        placeType = "otwarty sarkofag";
        storyImage = "<img src='sar.png'>";
      } else if (randomPlace < 0.7) {
        placeType = "starą kryptę";
        storyImage = "<img src='kry.png'>";
      } else if (randomPlace < 0.75) {
        placeType = "zawalony pałac";
        storyImage = "<img src='pał.png'>";
      } else if (randomPlace < 0.8) {
        placeType = "ruiny zamku";
        storyImage = "<img src='za.png'>";
      } else if (randomPlace < 0.85) {
        placeType = "jaskinię";
        storyImage = "<img src='jas.png'>";
      } else if (randomPlace < 0.9) {
        placeType = "cmentarz";
        storyImage = "<img src='cm.png'>";
      } else if (randomPlace < 0.95) {
        placeType = "gęstą mgłę";
        storyImage = "<img src='mg.png'>";
      } else {
        placeType = "opuszczoną drewnianą stodołę";
        storyImage = "<img src='stodo.png'>";
      }
    var storiesB = [
        ", przez swoją ciekawość spotykasz kłopoty...",
        ", jesteś odważny i nie ominiesz takiej okazji, ale nieoczekiwanie ktoś się pojawia...",
        ", nie możesz się powstrzymać i postanawiasz zaspokoić ciekawość...",
        ", jak się domyślasz nie wynikło z tego nic dobrego...", 
        ", ale od dłuższego czasu ktoś podążał za tobą...",
        ];
    var randomStoryA = storiesA[Math.floor(Math.random() * storiesA.length)];
    var randomStoryB = storiesB[Math.floor(Math.random() * storiesB.length)];
    enemyStats.innerHTML = storyImage;
    if (direction === "left") {
       addLogMessage("Idziesz w lewo " + randomStoryA + placeType + randomStoryB);
     } else if (direction === "right") {
       addLogMessage("Idziesz w prawo " + randomStoryA + placeType + randomStoryB);
     }
      decisionButtons.style.display = "none";
      encounterButton.style.display = "inline-block";
      travelButton.style.display = "none";
      enemyHP.style.display = "none";
    }

    function encounterEnemy() {
      var enemyType;
      var enemyExperience;
      var itemDrop;
      var itemEffect;
      var randomEnemy = Math.random();

    if (playerLevel <= 2) {
        if (randomEnemy < 0.1) {
        enemyType = "Wilk";
        enemyHealth = 40;
        enemyAttack = 8;
        enemyExperience = 20;
        itemDrop = "Monety";
        itemEffect = 2;
        storyImage = "<img src='wilk.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Pająk";
        enemyHealth = 30;
        enemyAttack = 6;
        enemyExperience = 15;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='paj.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Dziki pies";
        enemyHealth = 30;
        enemyAttack = 5;
        enemyExperience = 15;
        itemDrop = "Monety";
        itemEffect = 1;
        storyImage = "<img src='pies.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Żmija";
        enemyHealth = 15;
        enemyAttack = 15;
        enemyExperience = 10;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='żm.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Skorpion";
        enemyHealth = 15;
        enemyAttack = 15;
        enemyExperience = 10;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='skor.png'>";
      } else if (randomEnemy < 0.6) {
        enemyType = "Wąż";
        enemyHealth = 20;
        enemyAttack = 15;
        enemyExperience = 15;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='żm.png'>";
      } else if (randomEnemy < 0.7) {
        enemyType = "Utopiec";
        enemyHealth = 60;
        enemyAttack = 5;
        enemyExperience = 35;
        itemDrop = "Monety";
        itemEffect = 4;
        storyImage = "<img src='uto.png'>";
      } else if (randomEnemy < 0.8) {
        enemyType = "Wielki szczur";
        enemyHealth = 30;
        enemyAttack = 8;
        enemyExperience = 20;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='szcz.png'>";
      } else if (randomEnemy < 0.9) {
        enemyType = "Dzik";
        enemyHealth = 50;
        enemyAttack = 8;
        enemyExperience = 30;
        itemDrop = "Jedzenie";
        itemEffect = 1;
        storyImage = "<img src='dzik.png'>";
      } else {
        enemyType = "Szkielet";
        enemyHealth = 60;
        enemyAttack = 5;
        enemyExperience = 30;
        itemDrop = "Monety";
        itemEffect = 5;
        storyImage = "<img src='szk.png'>";
      }
    } else if (playerLevel <= 5) {
      if (randomEnemy < 0.1) {
        enemyType = "Zombie";
        enemyHealth = 70;
        enemyAttack = 3;
        enemyExperience = 35;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='zom.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Mag";
        enemyHealth = 90;
        enemyAttack = 8;
        enemyExperience = 55;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='mag.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Mutant";
        enemyHealth = 70;
        enemyAttack = 6;
        enemyExperience = 35;
        itemDrop = "Monety";
        itemEffect = 10;
        storyImage = "<img src='muta.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Wiedźma";
        enemyHealth = 80;
        enemyAttack = 11;
        enemyExperience = 45;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='wie.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Złodzieje";
        enemyHealth = 120;
        enemyAttack = 13;
        enemyExperience = 65;
        itemDrop = "Monety";
        itemEffect = 25;
        storyImage = "<img src='zł.png'>";
      } else if (randomEnemy < 0.6) {
        enemyType = "Nietoperz";
        enemyHealth = 20;
        enemyAttack = 15;
        enemyExperience = 15;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='nie.png'>";
      } else if (randomEnemy < 0.7) {
        enemyType = "Wiwerna";
        enemyHealth = 60;
        enemyAttack = 5;
        enemyExperience = 35;
        itemDrop = "Monety";
        itemEffect = 4;
        storyImage = "<img src='wiw.png'>";
      } else if (randomEnemy < 0.8) {
        enemyType = "Obłąkaniec";
        enemyHealth = 80;
        enemyAttack = 10;
        enemyExperience = 40;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='ob.png'>";
      } else if (randomEnemy < 0.9) {
        enemyType = "Ghul";
        enemyHealth = 60;
        enemyAttack = 6;
        enemyExperience = 30;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='ghul.png'>";
      } else {
        enemyType = "Mantikora";
        enemyHealth = 100;
        enemyAttack = 10;
        enemyExperience = 60;
        itemDrop = "Skrzynie";
        itemEffect = 1;
        storyImage = "<img src='man.png'>";
      }
    } else if (playerLevel <= 8) {
      if (randomEnemy < 0.1) {
        enemyType = "Zombie";
        enemyHealth = 70;
        enemyAttack = 3;
        enemyExperience = 35;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='zom.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Bandyta";
        enemyHealth = 80;
        enemyAttack = 6;
        enemyExperience = 40;
        itemDrop = "Monety";
        itemEffect = 15;
        storyImage = "<img src='rab.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Ork";
        enemyHealth = 70;
        enemyAttack = 6;
        enemyExperience = 35;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='ork.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Cyklop";
        enemyHealth = 70;
        enemyAttack = 6;
        enemyExperience = 35;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='cyk.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Gryf";
        enemyHealth = 120;
        enemyAttack = 7;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='gry.png'>";
      } else if (randomEnemy < 0.6) {
        enemyType = "Niedźwiedź";
        enemyHealth = 100;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Jedzenie";
        itemEffect = 1;
        storyImage = "<img src='nied.png'>";
      } else if (randomEnemy < 0.7) {
        enemyType = "Troll";
        enemyHealth = 90;
        enemyAttack = 7;
        enemyExperience = 45;
        itemDrop = "Skrzynie";
        itemEffect = 1;
        storyImage = "<img src='trol.png'>";
      } else if (randomEnemy < 0.8) {
        enemyType = "Golem";
        enemyHealth = 100;
        enemyAttack = 5;
        enemyExperience = 50;
        itemDrop = "Monety";
        itemEffect = 15;
        storyImage = "<img src='go.png'>";
      } else {
        enemyType = "Mumia";
        enemyHealth = 90;
        enemyAttack = 4;
        enemyExperience = 40;
        itemDrop = "Monety";
        itemEffect = 10;
        storyImage = "<img src='mum.png'>";
      }
    } else if (playerLevel <= 11) {
      if (randomEnemy < 0.1) {
        enemyType = "Assasyn";
        enemyHealth = 90;
        enemyAttack = 7;
        enemyExperience = 45;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='ass.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Dezertrzy";
        enemyHealth = 130;
        enemyAttack = 8;
        enemyExperience = 40;
        itemDrop = "Monety";
        itemEffect = 15;
        storyImage = "<img src='dez.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Ogr";
        enemyHealth = 110;
        enemyAttack = 8;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 1;
        storyImage = "<img src='shrek.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Krasnoludy";
        enemyHealth = 105;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Monety";
        itemEffect = 25;
        storyImage = "<img src='kra.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Elfy";
        enemyHealth = 105;
        enemyAttack = 7;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='el.png'>";
      } else if (randomEnemy < 0.6) {
        enemyType = "Mag lodu";
        enemyHealth = 100;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Jedzenie";
        itemEffect = 1;
        storyImage = "<img src='mal.png'>";
      } else if (randomEnemy < 0.7) {
        enemyType = "Lodowy troll";
        enemyHealth = 100;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Skrzynie";
        itemEffect = 1;
        storyImage = "<img src='lod.png'>";
      } else {
        enemyType = "Yeti";
        enemyHealth = 150;
        enemyAttack = 3;
        enemyExperience = 50;
        itemDrop = "Monety";
        itemEffect = 20;
        storyImage = "<img src='jeti.png'>";
      }
    } else if (playerLevel <= 14) {
      if (randomEnemy < 0.1) {
        enemyType = "Wampir";
        enemyHealth = 150;
        enemyAttack = 7;
        enemyExperience = 55;
        itemDrop = "Monety";
        itemEffect = 20;
        storyImage = "<img src='wan.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Wilkołak";
        enemyHealth = 150;
        enemyAttack = 8;
        enemyExperience = 49;
        itemDrop = "Monety";
        itemEffect = 20;
        storyImage = "<img src='wilko.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Duch";
        enemyHealth = 120;
        enemyAttack = 8;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='duch.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Minotaur";
        enemyHealth = 112;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Mikstura";
        itemEffect = 3;
        storyImage = "<img src='mino.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Chimera";
        enemyHealth = 120;
        enemyAttack = 7;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='chim.png'>";
      } else if (randomEnemy < 0.6) {
        enemyType = "Bazliszek";
        enemyHealth = 120;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Jedzenie";
        itemEffect = 1;
        storyImage = "<img src='bazl.png'>";
      } else if (randomEnemy < 0.7) {
        enemyType = "Goblin";
        enemyHealth = 130;
        enemyAttack = 7;
        enemyExperience = 50;
        itemDrop = "Skrzynie";
        itemEffect = 1;
        storyImage = "<img src='gob.png'>";
      } else {
        enemyType = "Mag cienia";
        enemyHealth = 160;
        enemyAttack = 3;
        enemyExperience = 50;
        itemDrop = "Monety";
        itemEffect = 20;
        storyImage = "<img src='cieni.png'>";
      }
    } else if (playerLevel <= 15) {
        enemyType = "Smok ognia";
        enemyHealth = 210;
        enemyAttack = 6;
        enemyExperience = 525;
        itemDrop = "Film1";
        itemEffect = 30;
        storyImage = "<img src='ogi.png'>";
    } else if (playerLevel <= 19) {
      if (randomEnemy < 0.1) {
        enemyType = "Jotun";
        enemyHealth = 190;
        enemyAttack = 7;
        enemyExperience = 55;
        itemDrop = "Mikstura";
        itemEffect = 3;
        storyImage = "<img src='jat.png'>";
      } else if (randomEnemy < 0.2) {
        enemyType = "Wikingowie";
        enemyHealth = 200;
        enemyAttack = 8;
        enemyExperience = 49;
        itemDrop = "Monety";
        itemEffect = 30;
        storyImage = "<img src='barb.png'>";
      } else if (randomEnemy < 0.3) {
        enemyType = "Nekromanta";
        enemyHealth = 200;
        enemyAttack = 6;
        enemyExperience = 70;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='nek.png'>";
      } else if (randomEnemy < 0.4) {
        enemyType = "Mag światła";
        enemyHealth = 210;
        enemyAttack = 6;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 3;
        storyImage = "<img src='bia.png'>";
      } else if (randomEnemy < 0.5) {
        enemyType = "Piraci";
        enemyHealth = 180;
        enemyAttack = 7;
        enemyExperience = 60;
        itemDrop = "Mikstura";
        itemEffect = 2;
        storyImage = "<img src='pira.png'>";
      } else {
        enemyType = "Orzeł";
        enemyHealth = 190;
        enemyAttack = 4;
        enemyExperience = 70;
        itemDrop = "Monety";
        itemEffect = 24;
        storyImage = "<img src='orz.png'>";
      }  
    } else if (playerLevel <= 20) {
      if (randomEnemy < 0.5) {
        enemyType = "ragnarok";
        enemyHealth = 260;
        enemyAttack = 6;
        enemyExperience = 600;
        itemDrop = "koniec";
        itemEffect = 3;
        storyImage = "<img src='rag.png'>";
      } else {
        enemyType = "Ragnarok";
        enemyHealth = 260;
        enemyAttack = 6;
        enemyExperience = 600;
        itemDrop = "koniec";
        itemEffect = 20;
        storyImage = "<img src='rag.png'>";
      }
    }

      addLogMessage("Spotkałeś " + enemyType + "!");
      enemyStats.innerHTML = storyImage;
      currEnemyHealth = enemyHealth;
      document.getElementById("enemyDamage").textContent = enemyAttack + playerLevel;
      updateEnemyHealthBar(currEnemyHealth);
      updateEnemyDamageBar(0);
      enemyHP.style.display = "block";
      isBattleOver = false;

      var playerAttackInterval = setInterval(playerAttack, 700);

      function playerAttack() {

        playerDamage = Math.floor(Math.random() * 20) + swords * 2;
        updatePlayerDamageBar(playerDamage);
        enemyHealth -= playerDamage;
        if (enemyHealth <= 0) {
          enemyHealth = 0;
        }
        updateEnemyHealthBar(enemyHealth);
        
        if (enemyHealth <= 0) {
          enemyHealth = 0;
        }
        
        addLogMessage("Zadano " + playerDamage + " obrażeń " + enemyType + "! (" + enemyHealth + "/" + currEnemyHealth + ")");

        if (enemyHealth <= 0) {
          isBattleOver = true;
          clearInterval(playerAttackInterval);
          enemyHealth = 0;
          enemyDamage = 0;
          updateEnemyDamageBar(enemyDamage);
          addLogMessage("Pokonałeś przeciwnika! Wygrywasz walkę!");
          defeatEnemy(enemyExperience, itemDrop, itemEffect);
          isBattleOver = true;
          updatePlayerHealthBar(playerHealth);
          return;
        } else {
          var enemyDamage = Math.floor(Math.random() * enemyAttack + playerLevel);
          if (playerResistance > 0) {
            playerResistance -= enemyDamage;
            if (playerResistance < 0) {
            playerResistance = 0;
            }
          } else {
            playerHealth -= enemyDamage;
          }
          updatePlayerResistanceBar(playerResistance);
          updatePlayerHealthBar(playerHealth);

          addLogMessage("Otrzymano " + enemyDamage + " obrażeń od " + enemyType + "!");
          updateEnemyDamageBar(enemyDamage);
          if (playerHealth <= 0) {
            isBattleOver = true;
            playerHealth = 0;
            clearInterval(playerAttackInterval);
            updatePlayerHealthBar(playerHealth);
            addLogMessage("Przeciwnik cię pokonał! Przegrywasz walkę!");
            isBattleOver = true;
            gameOver();
          }
        if (isBattleOver) {
          addLogMessage("Walka już się skończyła!");
          return;
        }
        }
      }
    }

    function defeatEnemy(enemyExperience, itemDrop, itemEffect) {
      addLogMessage("Zyskałeś " + enemyExperience + " punktów doświadczenia!");
      playerExperience += enemyExperience;
      playerDamage = 0;
      updatePlayerDamageBar(playerDamage);
      updatePlayerExperienceBar(playerExperience);
      encounterButton.style.display = "none";
      decisionButtons.style.display = "inline-block";
      if (playerExperience >= playerMaxExperience) {
        playerLevel++;
        playerExperience = playerExperience - playerMaxExperience;
        playerMaxExperience += 25;
        playerMaxHealth += 5;
        document.getElementById("playerLevel").textContent = playerLevel;
        document.getElementById("playerMaxExperience").textContent = playerMaxExperience;
        document.getElementById("playerMaxHealth").textContent = playerMaxHealth;
        updatePlayerExperienceBar(playerExperience);
        updatePlayerHealthBar(playerHealth);
        addLogMessage("Zdobyłeś nowy poziom! Jesteś teraz na poziomie " + playerLevel + "!");
      }
      if (itemDrop === "Mikstura") {
        potions += itemEffect;
        document.getElementById("potions").textContent = potions;
        addLogMessage("Zdobyto miksturę leczenia (+30 HP)!");
      } else if (itemDrop === "Jedzenie") {
        meals += itemEffect;
        document.getElementById("meals").textContent = meals;
        addLogMessage("Zdobyto jedzenie (Pełne uleczenie)!");
      } else if (itemDrop === "Skrzynie") {
        chests += itemEffect;
        document.getElementById("chests").textContent = chests;
        addLogMessage("Zdobyto skrzynię!");
      } else if (itemDrop === "Monety") {
        playerCoins += itemEffect;
        document.getElementById("playerCoins").textContent = playerCoins;
        addLogMessage("Zdobyto " + itemEffect + " monet!");
      } else if (itemDrop === "Film1") {
        playerCoins += itemEffect;
        document.getElementById("playerCoins").textContent = playerCoins;
        addLogMessage("Zdobyto " + itemEffect + " monet!");
        enemyStats.innerHTML = "";
	playVideo();
        enemyStats.innerHTML = "<img src='zwlo.png'>";
      }
    }

    function buyShield() {
      if (playerCoins >= 4) {
        if (playerResistance < playerMaxResistance) {
          playerCoins -= 4;
          shields++;
          playerResistance += 25;
          if (playerResistance > playerMaxResistance) {
            playerResistance = playerMaxResistance;
          }
          document.getElementById("playerCoins").textContent = playerCoins;
          document.getElementById("shields").textContent = shields;
          document.getElementById("playerResistance").textContent = playerResistance;
          updatePlayerResistanceBar(playerResistance);
          addLogMessage("Kupiono pancerz! Zwiększona odporność o 25!");
        } else {
        addLogMessage("Nie można kupić więcej pancerzy!");
        }
      } else {
        addLogMessage("Nie masz wystarczającej ilości monet!");
      }
    }

    function buyPotion() {
      if (playerCoins >= 4) {
        playerCoins -= 4;
        potions++;
        document.getElementById("playerCoins").textContent = playerCoins;
        document.getElementById("potions").textContent = potions;
        addLogMessage("Kupiono miksturę leczenia!");
      } else {
        addLogMessage("Nie masz wystarczającej ilości monet!");
      }
    }

    function buyMeal() {
      if (playerCoins >= 12) {
        playerCoins -= 12;
        meals++;
        document.getElementById("playerCoins").textContent = playerCoins;
        document.getElementById("meals").textContent = meals;
        addLogMessage("Kupiono jedzenie!");
      } else {
        addLogMessage("Nie masz wystarczającej ilości monet!");
      }
    }

    function buyChest() {
      if (playerCoins >= 10) {
        playerCoins -= 10;
        chests++;
        document.getElementById("playerCoins").textContent = playerCoins;
        document.getElementById("chests").textContent = chests;
        addLogMessage("Kupiono skrzynię!");
      } else {
        addLogMessage("Nie masz wystarczającej ilości monet!");
      }
    }

    function useChest() {
      if (chests >= 1) {
      var randomItem = Math.random();
      var itemDrop;
      var itemEffect;
      chests--;
      if (randomItem < 0.3) {
        itemDrop = "Monety";
        itemEffect = Math.floor(Math.random() * 15) + 5; // Losowa ilość monet od 5 do 20
        playerCoins += itemEffect;
        document.getElementById("playerCoins").textContent = playerCoins;
        document.getElementById("chests").textContent = chests;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś " + itemEffect + " monet!");
      } else if (randomItem < 0.7) {
        itemDrop = "Mikstura";
        itemEffect = Math.floor(Math.random() * 3) + 1; // Losowa ilość mikstur od 1 do 3
        potions += itemEffect;
        document.getElementById("potions").textContent = potions;
        document.getElementById("chests").textContent = chests;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś mikstury leczenia w ilości " + itemEffect + "!");
      } else {
        itemDrop = "Jedzenie";
        itemEffect = 1;
        meals += itemEffect;
        document.getElementById("meals").textContent = meals;
        document.getElementById("chests").textContent = chests;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś posiłek!");
      }
      } else {
        addLogMessage("Nie masz żadnych skrzyń!");
      }
    }

  function openChest() {
    if (playerCoins >= 10) {
      playerCoins -= 10;
      document.getElementById("playerCoins").textContent = playerCoins;

      var randomItem = Math.random();
      var itemDrop;
      var itemEffect;
      if (randomItem < 0.4) {
        itemDrop = "Monety";
        itemEffect = Math.floor(Math.random() * 10) + 1; // Losowa ilość monet od 1 do 10
        playerCoins += itemEffect;
        document.getElementById("playerCoins").textContent = playerCoins;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś " + itemEffect + " monet!");
      } else if (randomItem < 0.7) {
        itemDrop = "Mikstura";
        itemEffect = Math.floor(Math.random() * 3) + 1; // Losowa ilość mikstur od 1 do 3
        potions += itemEffect;
        document.getElementById("potions").textContent = potions;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś " + itemEffect + " mikstur leczenia!");
      } else {
        itemDrop = "Jedzenie";
        itemEffect = Math.floor(Math.random() * 3) + 1; // Losowa ilość jedzenia od 1 do 3
        meals += itemEffect;
        document.getElementById("meals").textContent = meals;
        addLogMessage("Otworzyłeś skrzynię! Zdobyłeś " + itemEffect + " jedzenia!");
      }
    } else {
      addLogMessage("Nie masz wystarczającej ilości monet!");
    }
  }

    function buySword() {
      if (playerCoins >= (swords * 4 + 10)) {
        playerCoins -= (swords * 4 + 10);
        swords++;
        document.getElementById("playerCoins").textContent = playerCoins;
        document.getElementById("playerMaxDamage").textContent = playerMaxDamage += 2;
        document.getElementById("swordButton").innerHTML = "Ulepsz miecz (+2 DMG, " + (swords * 4 + 10) + " monet)";
        updatePlayerDamageBar(playerDamage);
        document.getElementById("swords").textContent = swords;
        addLogMessage("Ulepszono miecz! Zwiększone obrażenia o 2!");
      } else {
        addLogMessage("Nie masz wystarczającej ilości monet!");
      }
    }

    function usePotion() {
      if (potions > 0) {
        potions--;
        playerHealth += 30;
        if (playerHealth > playerMaxHealth) {
          playerHealth = playerMaxHealth;
        }
        updatePlayerHealthBar(playerHealth);
        document.getElementById("potions").textContent = potions;
        addLogMessage("Użyto mikstury leczenia (+30 HP)!");
      } else {
        addLogMessage("Nie masz żadnych mikstur w ekwipunku!");
      }
    }

    function useMeal() {
      if (meals > 0) {
        meals--;
        playerHealth = playerMaxHealth;
        updatePlayerHealthBar(playerHealth);
        document.getElementById("meals").textContent = meals;
        addLogMessage("Zjedzono posiłek (Pełne uleczenie)!");
      } else {
        addLogMessage("Nie masz żadnych posiłków w ekwipunku!");
      }
    }

    function runAway() {
      if (isBattleOver) {
        addLogMessage("Walka już się skończyła!");
        return;
      }

      addLogMessage("Uciekasz z walki! Nie otrzymujesz żadnej nagrody.");

      if (healthAfterEscape <= 0) {
        isBattleOver = true;
        playerHealth = 0;
        updatePlayerHealthBar(playerHealth);
        addLogMessage("Przeciwnik zadał zbyt dużo obrażeń! Twoje zdrowie spadło do zera.");
        gameOver();
        return;
      }
    }

    function updateEnemyHealthBar(health) {
      var healthEnemyBarFill = document.getElementById("healthEnemyBarFill");
      healthEnemyBarFill.style.width = health/currEnemyHealth*100 + "%";
      document.getElementById("currEnemyHealth").textContent = health;
      document.getElementById("enemyHealth").textContent = currEnemyHealth;
    }

    function updatePlayerHealthBar(health) {
      var healthBarFill = document.getElementById("healthBarFill");
      healthBarFill.style.width = health/playerMaxHealth*100 + "%";
      document.getElementById("playerHealth").textContent = health;
    }

    function updatePlayerResistanceBar(health) {
      var resistanceBarFill = document.getElementById("resistanceBarFill");
      resistanceBarFill.style.width = health/playerMaxResistance*100 + "%";
      document.getElementById("shields").textContent = Math.ceil(playerResistance / 25);
      document.getElementById("playerResistance").textContent = health;
    }

    function updatePlayerDamageBar(health) {
      var damageBarFill = document.getElementById("damageBarFill");
      damageBarFill.style.width = health/playerMaxDamage*100 + "%";
      document.getElementById("playerDamage").textContent = health;
    }

    var enemyAttackInterval = setInterval(updateEnemyDamageBar(health), 1000);
    function updateEnemyDamageBar(health) {
      var damageEnemyBarFill = document.getElementById("damageEnemyBarFill");
      damageEnemyBarFill.style.width = health/(enemyAttack+playerLevel)*100 + "%";
      document.getElementById("enemyAttack").textContent = health;
      clearInterval(enemyAttackInterval);
    }

    function updatePlayerExperienceBar(health) {
      var experienceBarFill = document.getElementById("experienceBarFill");
      experienceBarFill.style.width = health/playerMaxExperience*100 + "%";
      document.getElementById("playerExperience").textContent = health;
    }

    function addLogMessage(message) {
      var logMessage = document.createElement("p");
      logMessage.textContent = message;
      logMessage.classList.add("logMessage");
      combatLog.appendChild(logMessage);
      combatLog.scrollTop = combatLog.scrollHeight;
    }

     function playVideo() {
      var video = document.getElementById("gameVideo");
      video.style.display = "block";
      video.play();
      video.addEventListener("ended", function() {
      video.style.display = "none";
      });
     }

    function gameOver() {
      addLogMessage("Przegrałeś! Koniec gry.");
      var buttons = document.getElementsByTagName("button");
      for (var i = 0; i < buttons.length; i++) {
        buttons[i].disabled = true;
      }
    }
  </script>
</body>
</html>